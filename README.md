# Lab Assembler Project In C
## Table of Contents
- [Introduction](#Introduction)
- [Usage](#Usage)
- [Code](#Code)
- [Author](#Author)
## Introduction
### This project, developed in C, as a final project for the "Lab in Systems Programming" course, part of the Computer Science degree at the Open University of Israel.
#### It encompasses a comprehensive assembler system, functioning in several stages:
#### 1. Preprocessing: Initially, an assembly source code file is processed to expand macros, producing an intermediary ".am" file.
#### 2. Two-Pass Assembly: The system then executes a two-pass assembly process on the ".am" file, culminating in the generation of a machine code file (".ob"). Additionally, it creates:
#### - A ".ent" file detailing the addresses of all entry points.
#### - A ".ext" file listing the addresses of external variables.
#### This structure not only modularizes the assembly process but also ensures the generation of necessary metadata for linkage and execution.
## Usage
### To use the assembler, follow these steps:
#### 1. Clone the repository.
#### 2. Compile the code using the provided makefile.
#### 3. Run the assembler, providing the path to the assembly source code file as an argument. 
#### 4. The assembler will generate the necessary files in the same directory as the source code file.
## Code
### The code is divided into several modules:
#### 1. Preprocessor: This module is responsible for expanding macros in the source code file.
#### - The preprocessor reads the source code file line by line, identifying and storing all macro definitions inside a 2d pointer array, which is dynamically allocated. It simultaneously writes the source code to a temporary file, replacing macro definitions with their respective values.
#### 2. First Pass: This module is responsible for the first pass of the assembly process, generating a symbol table and an intermediate file.
#### - The first pass reads the temporary file generated by the preprocessor, processing each line to identify and store all labels and their respective addresses in the symbol table (which is a dynamically allocated linked list). It also converts the first line of each instruction to a machine code representation. It fills an instruction and data arrays of fixed size (3,996 each) with the .data values, and first line instructions. It does this using a calculated IC and DC counters. It finds errors in the source code and notifies the user if any are found, halting the assembly process. 
#### 3. Second Pass: This module is responsible for the second pass of the assembly process, generating the machine code file and the entry and external files.
#### - The second pass reads the source file again, processing each line to generate the machine code file. Afterwards, it generates the .ob, .ent, and .ext files. It also finds errors in the source code and notifies the user if any are found, halting the assembly process.

## Author
Omri Peretz
```c
```